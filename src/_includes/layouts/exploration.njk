{% extends "layouts/base.njk" %}

{% block content %}

<div class="exploration-page">

    <h1>{{ title or "Untitled Exploration" }}</h1>

    <p><strong>Status:</strong> {{ status or "unknown" }}</p>
    <p><strong>Tags:</strong> {{ tags | default([]) | join(", ") }}</p>
    <p><strong>Started:</strong> {{ startDate | toStringDate }}</p>
    <p><strong>Last update:</strong> {{ latestUpdate | toStringDate }}</p>

  {% if overview %}
    <h2>Overview</h2>
    <div class="overview">
      {{ overview or "" | safe }}
    </div>
    {% endif %}

    <h2>Logs</h2>
    {% if logEntries | length %}
      {% for log in logEntries %}
        <div class="log-entry {% if log.data.tags and "what-i-broke" in log.data.tags %}log-broke{% endif %}">
          <h3>{{ log.data.title }}</h3>
          <p><strong>Date:</strong> {{ log.data.date | toStringDate }}</p>
          <p><strong>Tags:</strong> {{ log.data.tags | default([]) | join(", ") }}</p>
          <p><strong>Status:</strong> {{ log.data.status }}</p>
          <div class="log-content">
            {{ log.templateContent | safe }}
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p>No logs available yet.</p>
    {% endif %}

    {# Lingering questions #}
    {% if unansweredQuestions %}
      <section>
        <h3>Lingering questions</h3>
        <ul>
          {% if unansweredQuestions is string %}
            <li>{{ unansweredQuestions }}</li>
          {% else %}
            {% for question in unansweredQuestions %}
              <li>{{ question }}</li>
            {% endfor %}
          {% endif %}
        </ul>
      </section>
      {% endif %}


    {# Reflections #}
    {% if reflections %}
      <section>
        <h3>Reflections</h3>
        <ul>
          {% for reflection in reflections %}
            <li>{{ reflection }}</li>
          {% endfor %}
        </ul>
      </section>
      {% endif %}

    {# Tools #}
    {% if tools %}
      <section>
        <h3>Tools</h3>
        <ul>
          {% for tool in tools %}
            <li>{{ tool }}</li>
          {% endfor %}
        </ul>
      </section>
      {% endif %}

    {# References #}
    {% if references %}
      <section>
        <h3>References</h3>
        <ul>
          {% for reference in references %}
            <li>{{ reference }}</li>
          {% endfor %}
        </ul>
      </section>
      {% endif %}

    {# Exploration not found for slug: {{page.fileSlug}} #}
</div>

{% endblock %}
